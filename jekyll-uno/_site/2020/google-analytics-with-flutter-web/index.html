<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  

  <title>Google Analytics with Flutter Web</title>
  <meta name="description" content="Want to add Google Analytics to your flutter web application? Then, this blog is for you.

">
  <meta name="author" content="Sai Rajendra Immadi">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-168944360-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-168944360-2');
</script>

  

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Google Analytics with Flutter Web">
  <meta name="twitter:description" content="Want to add Google Analytics to your flutter web application? Then, this blog is for you.

">
  
  <meta name="twitter:creator" content="immadisairaj">
  
  <meta name="twitter:image" content="https://immadisairaj.github.io//blog/images/logo.png" />

  <meta property="og:type" content="article">
  <meta property="og:title" content="Google Analytics with Flutter Web">
  <meta property="og:description" content="Want to add Google Analytics to your flutter web application? Then, this blog is for you.

">
  <meta property="og:image" content="https://immadisairaj.github.io//blog/images/logo.png" />

  <link rel="apple-touch-icon" sizes="57x57" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/blog/images/logo.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/logo.png">
  <link rel="icon" type="image/png" href="/blog/images/logo.png" sizes="32x32">
  <link rel="icon" type="image/png" href="/blog/images/logo.png" sizes="194x194">
  <link rel="icon" type="image/png" href="/blog/images/logo.png" sizes="96x96">
  <link rel="icon" type="image/png" href="/blog/images/logo.png" sizes="192x192">
  <link rel="icon" type="image/png" href="/blog/images/logo.png" sizes="16x16">
  <link rel="manifest" href="/blog/images/favicons/manifest.json">
  <link rel="shortcut icon" href="/blog/images/logo.png">
  <meta name="msapplication-TileColor" content="#ffc40d">
  <meta name="msapplication-TileImage" content="/blog/images/logo.png">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="/blog/css/main.css?1634810456199824000">
  <link rel="canonical" href="https://immadisairaj.github.io/blog/2020/google-analytics-with-flutter-web/">
  <link rel="alternate" type="application/rss+xml" title="Sai Rajendra Immadi" href="/blog/feed.xml">
</head>


  <body>
    <span class="mobile btn-mobile-menu">
  <i class="icon icon-list btn-mobile-menu__icon"></i>
  <i class="icon icon-x-circle btn-mobile-close__icon hidden"></i>
</span>

<header class="panel-cover" style="background-image: url(/blog/images/cover.jpg)">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">
        <a href="https://immadisairaj.github.io" title="link to home of Sai Rajendra Immadi">
          <img src="/blog/images/logo.png" class="user-image" alt="My Profile Photo">
          <h1 class="panel-cover__title panel-title">Sai Rajendra Immadi</h1>
        </a>
        <hr class="panel-cover__divider">
        <p class="panel-cover__description">Open-Source Enthusiast | Musician</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary">

        <div class="navigation-wrapper">

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/blog/#blog" title="link to Sai Rajendra Immadi blog" class="blog-button">Blog</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation cover-navigation--primary">
            <ul class="navigation">
              <li class="navigation__item"><a href="/blog/tags" title="link to Sai Rajendra Immadi tags" class="blog-button">Tags</a></li>
            </ul>
          </nav>

          <nav class="cover-navigation navigation--social">
            <ul class="navigation">

            
              <!-- Twitter -->
              <li class="navigation__item">
                <a href="http://twitter.com/immadisairaj" title="@immadisairaj on Twitter" target="_blank">
                  <i class="icon icon-social-twitter"></i>
                  <span class="label">Twitter</span>
                </a>
              </li>
            

            

            
              <!-- LinkedIn -->
              <li class="navigation__item">
                <a href="https://www.linkedin.com/in/immadisairaj" title="immadisairaj on LinkedIn" target="_blank">
                  <i class="icon icon-social-linkedin"></i>
                  <span class="label">LinkedIn</span>
                </a>
              </li>
            

            
              <!-- GitHub -->
              <li class="navigation__item">
                <a href="https://www.github.com/immadisairaj" title="immadisairaj on GitHub" target="_blank">
                  <i class="icon icon-social-github"></i>
                  <span class="label">GitHub</span>
                </a>
              </li>
            

            
              <!-- Email -->
              <li class="navigation__item">
                <a href="mailto:immadirajendra.sai@gmail.com" title="Email immadirajendra.sai@gmail.com" target="_blank">
                  <i class="icon icon-mail"></i>
                  <span class="label">Email</span>
                </a>
              </li>
            

            <!-- RSS -->
            <!-- <li class="navigation__item">
              <a href="/blog/feed.xml" title="Subscribe" target="_blank">
                <i class="icon icon-rss"></i>
                <span class="label">RSS</span>
              </a>
            </li> -->

            </ul>
          </nav>

        </div>

      </div>

    </div>

    <div class="panel-cover--overlay"></div>
  </div>
</header>


    <div class="content-wrapper">
      <div class="content-wrapper__inner">
        <article class="post-container post-container--single">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2020-06-11 16:26" class="post-meta__date date">11 Jun 2020</time>
      
      &#8226; <span class="post-meta__tags">on <a href="/blog/tags/#Open-Source">Open-Source</a>, <a href="/blog/tags/#Flutter">Flutter</a>, <a href="/blog/tags/#Google-Analytics">Google-Analytics</a></span>
      
    </div>
    <h1 class="post-title">Google Analytics with Flutter Web</h1>
  </header>

  <section class="post">
    <p>Want to add Google Analytics to your flutter web application? Then, this blog is for you.</p>

<p>I didn’t find any direct methods to add google-analytics to my flutter-web application while I was searching. I’ve managed to integrate it successfully by referring to different blogs. So, I am writing this blog to make it easier.</p>

<h2 id="steps-to-be-followed">Steps to be followed</h2>

<h3 id="create-google-analytics">Create Google Analytics</h3>

<p>Go to <a href="https://analytics.google.com">analytics.google.com</a> and login with your account. Then, create a new property with your website domain linked. Now, go to <code class="language-plaintext highlighter-rouge">Admin -&gt; Property -&gt; Tracking Info -&gt; Tracking Code</code> and keep the <em>Tracking ID</em> noted. (It looks something like <code class="language-plaintext highlighter-rouge">UA-XXXXXXXXX-X</code>)</p>

<h3 id="add-google-analytics-to-flutter-project">Add Google Analytics to Flutter Project</h3>

<p>So, assuming you have already set-up the flutter-web project.</p>

<p>Create a new file named <code class="language-plaintext highlighter-rouge">app.js</code> under <code class="language-plaintext highlighter-rouge">/web</code>. And the copy the below code into it.</p>

<p><em>Old:</em></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Warning: Old method, please prefer the new script (below)</span>
<span class="c1">// file: /web/app.js</span>
<span class="kd">function</span> <span class="nx">sendNavigation</span><span class="p">(</span><span class="nx">location</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pageview</span><span class="dl">'</span><span class="p">,</span> <span class="nx">location</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<p><em>New:</em></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// file: /web/app.js</span>
<span class="kd">function</span> <span class="nx">sendNavigation</span><span class="p">(</span><span class="nx">location</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Replace UA-XXXXXXXXX-X with Google Analytics ID</span>
    <span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">config</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UA-XXXXXXXXX-X</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">page_path</span><span class="p">:</span> <span class="nx">location</span> <span class="p">});</span>
<span class="p">}</span>
</code></pre></div></div>

<p>You might already have a file <code class="language-plaintext highlighter-rouge">/web/index.html</code>. Add the following into the <em>html</em> file inside <code class="language-plaintext highlighter-rouge">&lt;head&gt;</code> and <code class="language-plaintext highlighter-rouge">&lt;/head&gt;</code>.</p>

<p><em>Old:</em></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Warning: Old method, please prefer the new script (below) --&gt;</span>
<span class="c">&lt;!-- file: /web/index.html --&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;script&gt;</span>
        <span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">s</span><span class="p">,</span><span class="nx">o</span><span class="p">,</span><span class="nx">g</span><span class="p">,</span><span class="nx">r</span><span class="p">,</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">){</span><span class="nx">i</span><span class="p">[</span><span class="dl">'</span><span class="s1">GoogleAnalyticsObject</span><span class="dl">'</span><span class="p">]</span><span class="o">=</span><span class="nx">r</span><span class="p">;</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">]</span><span class="o">||</span><span class="kd">function</span><span class="p">(){</span>
        <span class="p">(</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">=</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">q</span><span class="o">||</span><span class="p">[]).</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)},</span><span class="nx">i</span><span class="p">[</span><span class="nx">r</span><span class="p">].</span><span class="nx">l</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span><span class="nx">a</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">o</span><span class="p">),</span>
        <span class="nx">m</span><span class="o">=</span><span class="nx">s</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">o</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span><span class="nx">a</span><span class="p">.</span><span class="k">async</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="nx">a</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">g</span><span class="p">;</span><span class="nx">m</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="nx">m</span><span class="p">)</span>
        <span class="p">})(</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="dl">'</span><span class="s1">script</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">https://www.google-analytics.com/analytics.js</span><span class="dl">'</span><span class="p">,</span><span class="dl">'</span><span class="s1">ga</span><span class="dl">'</span><span class="p">);</span>

        <span class="c1">// Replace UA-XXXXXXXXX-X with Google Analytics ID</span>
        <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">create</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UA-XXXXXXXXX-X</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">auto</span><span class="dl">'</span><span class="p">);</span>
        <span class="nx">ga</span><span class="p">(</span><span class="dl">'</span><span class="s1">send</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">pageview</span><span class="dl">'</span><span class="p">);</span>
    <span class="nt">&lt;/script&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span> <span class="na">defer</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</code></pre></div></div>

<p><em>New:</em></p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- file: /web/index.html --&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="c">&lt;!-- Replace UA-XXXXXXXXX-X with Google Analytics ID --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">async</span> <span class="na">src=</span><span class="s">"https://www.googletagmanager.com/gtag/js?id=UA-XXXXXXXXX-X"</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;script&gt;</span>
      <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">dataLayer</span> <span class="o">||</span> <span class="p">[];</span>
      <span class="kd">function</span> <span class="nx">gtag</span><span class="p">(){</span><span class="nx">dataLayer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);}</span>
      <span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">js</span><span class="dl">'</span><span class="p">,</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">());</span>

      <span class="c1">// Replace UA-XXXXXXXXX-X with Google Analytics ID</span>
      <span class="nx">gtag</span><span class="p">(</span><span class="dl">'</span><span class="s1">config</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">UA-XXXXXXXXX-X</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">send_page_view</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
    <span class="c">&lt;!-- ... --&gt;</span>
    <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"app.js"</span> <span class="na">defer</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
</code></pre></div></div>

<p>After adding this, you can have the Google-Analytics running. But, there is a small error you might face and which is, the whole website which has different pages be tracked under the same page <code class="language-plaintext highlighter-rouge">/</code> and it is because the whole flutter web project is being built on the root. So, the navigation pages would have something like <code class="language-plaintext highlighter-rouge">/#/&lt;route&gt;</code>. So, the Google-Analytics doesn’t track those pages due to <code class="language-plaintext highlighter-rouge">#</code> coming in between. But, fear not, I might just have a fix for it.</p>

<p>I am assuming that you are using named navigation to navigate different pages.</p>

<p>The following might be the code you are already having. and I have few comments there to just add what all lines are needed.</p>
<div class="language-dart highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// example file: /lib/home.dart</span>

<span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'dart:js'</span> <span class="k">as</span> <span class="n">js</span><span class="o">;</span>     <span class="c1">// add this line if you don't have one</span>

<span class="kd">class</span> <span class="nc">Home</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">const</span> <span class="n">Home</span><span class="o">({</span><span class="n">Key</span> <span class="n">key</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">route</span> <span class="o">=</span> <span class="s">'/'</span><span class="o">;</span> <span class="c1">// add this line if you don't have one</span>
  
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">js</span><span class="o">.</span><span class="na">context</span><span class="o">.</span><span class="na">callMethod</span><span class="o">(</span><span class="s">'sendNavigation'</span><span class="o">,</span> <span class="o">[</span><span class="n">route</span><span class="o">]);</span>   <span class="c1">// add this line</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="o">(</span><span class="cm">/* ... */</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<p>The above code is an example for Home page. If you want to track other pages, have the same code added to the other pages as well. Now, you will be having all your pages tracking in Google-Analytics.</p>

<p><strong>Note:</strong> You need to look that all the pages tracked, but this tracking will not contain <code class="language-plaintext highlighter-rouge">#</code> in them. For example, <code class="language-plaintext highlighter-rouge">/#/&lt;route&gt;</code> will be tracked as <code class="language-plaintext highlighter-rouge">/&lt;route&gt;</code>.</p>

<p>If you want to look into an example of how I integrated Google-Analytics into my Flutter Web Application. <a href="https://github.com/immadisairaj/Portfolio/commit/51f4e0b918a6965083e6ad687e46d27bf2326336">Here</a> is the commit of the google-analytics integration.</p>


  </section>
  <br></br>
  <div class="license-wrapper
  d-flex justify-content-between align-items-center pt-2 pb-2">
    This post is licensed under
    <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a>
    by the author.
  </div>
  <br></br>
  <section id="disqus_thread"></section><!-- /#disqus_thread -->
</article>

    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://immadisairaj.github.io/blog/2020/google-analytics-with-flutter-web/';  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = '/blog/2020/google-analytics-with-flutter-web'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        this.page.title = 'Google Analytics with Flutter Web'
      };

      (function() {  // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        var d = document, s = d.createElement('script');
        s.src = '//immadisairaj-github-io.disqus.com/embed.js';  // IMPORTANT: Replace EXAMPLE with your forum shortname!
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



      </div>

      <footer class="footer">
  <span class="footer__copyright">&copy; 2021 Sai Rajendra Immadi. All rights reserved.</span>
</footer>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="/blog/js/main.js?1634810456199824000"></script>

    </div>
  </body>
</html>